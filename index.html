<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¤ãƒ™ãƒ³ãƒˆé–‹å‚¬ãƒ»ãƒ¬ãƒ³ã‚¿ãƒ«ç”³è¾¼ | ãƒˆãƒ¬ã‚«ã‚­ãƒ³ã‚°ãƒ€ãƒ </title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- æ˜ã‚‹ã„é…è‰²ã®å®šç¾© --- */
        :root {
            --primary: #ff0055;       /* ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼ï¼ˆãƒ”ãƒ³ã‚¯ï¼‰ */
            --background: #f5f7fa;    /* å…¨ä½“ã®èƒŒæ™¯è‰²ï¼ˆè–„ã„ã‚°ãƒ¬ãƒ¼ï¼‰ */
            --card-bg: #ffffff;       /* ã‚«ãƒ¼ãƒ‰ã®èƒŒæ™¯è‰²ï¼ˆç™½ï¼‰ */
            --text-main: #333333;     /* ãƒ¡ã‚¤ãƒ³æ–‡å­—è‰²ï¼ˆæ¿ƒã„ã‚°ãƒ¬ãƒ¼ï¼‰ */
            --accent-gold: #c7a000;   /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼ˆã‚´ãƒ¼ãƒ«ãƒ‰ãƒ»æš—ã‚ï¼‰ */
            --accent-blue: #007bc7;   /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼ˆé’ãƒ»è¦–èªæ€§é‡è¦–ï¼‰ */
            --error: #d32f2f;         /* ã‚¨ãƒ©ãƒ¼è‰²ï¼ˆèµ¤ï¼‰ */
            --border-color: #e0e0e0;  /* æ ç·šã®è‰² */
        }

        body {
            background-color: var(--background);
            color: var(--text-main);
            font-family: 'Roboto', sans-serif;
            padding-bottom: 50px;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            text-align: center;
            padding: 30px 20px;
            background: #ffffff;
            border-bottom: 3px solid var(--primary); /* ãƒ”ãƒ³ã‚¯ã®ãƒ©ã‚¤ãƒ³ã§å¼·èª¿ */
            margin-bottom: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .logo-img {
            max-width: 90%;
            width: 300px;
            height: auto;
            margin-bottom: 15px;
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            color: var(--text-main);
            letter-spacing: 1px;
            font-size: 1.8em;
            margin-bottom: 10px;
        }
        header p { margin-bottom: 0; color: #666; }

        /* ãƒªãƒ³ã‚¯ */
        a.site-link {
            text-decoration: underline;
            font-weight: bold;
            transition: opacity 0.2s;
        }
        a.site-link:hover { opacity: 0.8; }

        /* ã‚«ãƒ¼ãƒ‰ï¼ˆç™½ã„æ ï¼‰ */
        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.03);
        }
        .card h3 {
            border-left: 5px solid var(--primary);
            padding-left: 15px;
            margin-bottom: 25px;
            color: var(--text-main);
            font-weight: bold;
        }

        /* å„ç¨®ãƒœãƒƒã‚¯ã‚¹ã®æ˜ã‚‹ã„é…è‰² */
        .notice-box {
            background-color: #e3f2fd; /* è–„ã„é’ */
            border: 1px solid var(--accent-blue);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.95em;
            color: #0d47a1;
        }

        .rule-box {
            background-color: #ffebee; /* è–„ã„ãƒ”ãƒ³ã‚¯ */
            border: 1px solid var(--primary);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.95em;
            color: #b71c1c;
        }
        .rule-box h5 {
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: bold;
        }

        /* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ */
        details.sim-box {
            background: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px 20px;
            margin-bottom: 20px;
        }
        details.sim-box summary {
            font-weight: bold;
            color: var(--accent-gold);
            cursor: pointer;
            list-style: none;
        }
        details.sim-box summary::after { content: " â–¼"; font-size: 0.8em; }
        details.sim-box[open] summary::after { content: " â–²"; }

        .calc-row {
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-color);
            padding: 8px 0;
            font-size: 0.95em;
        }
        .calc-total {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            font-weight: bold;
            font-size: 1.2em;
            color: var(--accent-gold);
        }
        .text-red { color: var(--error); }
        .text-blue { color: var(--accent-blue); }
        .text-gold { color: var(--accent-gold); }

        /* å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®æ˜ã‚‹ã„ãƒ‡ã‚¶ã‚¤ãƒ³ */
        input, textarea, select {
            background-color: #ffffff !important;
            border: 1px solid #cccccc !important;
            color: var(--text-main) !important;
        }
        input:focus, textarea:focus {
            border-color: var(--primary) !important;
            box-shadow: 0 0 0 3px rgba(255, 0, 85, 0.2) !important;
        }
        label { font-weight: bold; color: #555; }
        small { color: #777; }

        /* é€ä¿¡ãƒœã‚¿ãƒ³ */
        button[type="submit"] {
            background: var(--primary);
            border: none;
            font-weight: bold;
            font-size: 1.2em;
            padding: 15px;
            margin-top: 25px;
            width: 100%;
            border-radius: 30px; /* ä¸¸ã¿ã‚’ã¤ã‘ã¦è¦ªã—ã¿ã‚„ã™ã */
            box-shadow: 0 4px 10px rgba(255, 0, 85, 0.3);
            transition: background-color 0.2s, transform 0.1s;
        }
        button[type="submit"]:hover {
            background-color: #e6004c;
            transform: translateY(-2px);
        }
        
        input[type=range] { height: 6px; background: #e0e0e0; border-radius: 5px; outline: none; }
    </style>
</head>
<body>

    <header>
        <img src="tck_logo_regular_h_trim.png" alt="ãƒˆãƒ¬ã‚«ã‚­ãƒ³ã‚°ãƒ€ãƒ  ãƒ­ã‚´" class="logo-img">
        <h1>Duel Space Booking</h1>
        <p>ãƒˆãƒ¬ã‚«ã‚­ãƒ³ã‚°ãƒ€ãƒ  ã‚¤ãƒ™ãƒ³ãƒˆé–‹å‚¬ç”³è¾¼</p>
    </header>

    <main class="container">

        <section class="card">
            <h3>ãƒ—ãƒ©ãƒ³æ¦‚è¦</h3>
            <div class="grid" style="margin-bottom: 25px; text-align: center;">
                <div>
                    <small>ä¼šå ´ãƒ¬ãƒ³ã‚¿ãƒ«æ–™</small><br>
                    <strong style="font-size:1.4em; color:var(--text-main);">Â¥32,000</strong>
                </div>
                <div style="border-left: 1px solid var(--border-color); border-right: 1px solid var(--border-color);">
                    <small>å®šå“¡</small><br>
                    <strong style="font-size:1.4em; color:var(--text-main);">æœ€å¤§ 32å</strong>
                </div>
                <div>
                    <small>ç‰¹å…¸ (é€šè²©ãƒã‚¤ãƒ³ãƒˆ)</small><br>
                    <strong style="font-size:1.4em; color:var(--accent-blue);">32,000 pté€²å‘ˆ</strong>
                </div>
            </div>
            
            <div class="rule-box">
                <h5>âš ï¸ å‚åŠ è³ãƒ»ä¼šå“¡ç™»éŒ²ã«ã¤ã„ã¦ï¼ˆé‡è¦ï¼‰</h5>
                <ul style="margin-bottom: 0; padding-left: 20px;">
                    <li><strong>å‚åŠ è€…1äººã«ã¤ãã€Œæœ€ä½ 250ptã€ã®å‚åŠ è³é…å¸ƒãŒå¿…é ˆ</strong>ã§ã™ã€‚<br><small>ï¼ˆä¾‹ï¼š32åå‚åŠ ã®å ´åˆã€250ptÃ—32åï¼8,000ptã¯å¿…ãšå‚åŠ è³ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ï¼‰</small></li>
                    <li>
                        ãƒã‚¤ãƒ³ãƒˆä»˜ä¸ã®ãŸã‚ã€å‚åŠ è€…å…¨å“¡ã®<br>
                        <strong><a href="https://shop.japan-toreca.com/" target="_blank" class="site-link" style="color:var(--primary);">ã€Œãƒˆãƒ¬ã‚«ã‚­ãƒ³ã‚°ãƒ€ãƒ é€šè²©ã‚µã‚¤ãƒˆã€</a></strong>
                        ã¸ã®ä¼šå“¡ç™»éŒ²ãŒå¿…é ˆã¨ãªã‚Šã¾ã™ã€‚
                    </li>
                    <li>ä¸»å‚¬è€…æ§˜ã¯ã€äº‹å‰ã«å‚åŠ è€…ã¸ä¼šå“¡ç™»éŒ²ã®å‘¨çŸ¥ã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚</li>
                </ul>
            </div>

            <div class="notice-box">
                <strong>ğŸ’³ ä¼šå ´è²»ã®ãŠæ”¯æ‰•ã„ã«ã¤ã„ã¦</strong><br>
                ä¼šå ´è²»32,000å††ã¯<strong>ã€éŠ€è¡ŒæŒ¯è¾¼ã€‘</strong>ã«ã¦äº‹å‰ã«ãŠæ”¯æ‰•ã„ã„ãŸã ãã¾ã™ã€‚<br>
                å…¥é‡‘ç¢ºèªå¾Œã€
                <a href="https://shop.japan-toreca.com/" target="_blank" class="site-link" style="color:var(--accent-blue);">ã€Œãƒˆãƒ¬ã‚«ã‚­ãƒ³ã‚°ãƒ€ãƒ é€šè²©ã‚µã‚¤ãƒˆã€</a>
                ã§ä½¿ãˆã‚‹32,000ãƒã‚¤ãƒ³ãƒˆã‚’ä»˜ä¸ã„ãŸã—ã¾ã™ã€‚<br>
                <small>â€»æŒ¯è¾¼å…ˆå£åº§ã¯ã€ãŠç”³ã—è¾¼ã¿å¾Œã«ãƒ¡ãƒ¼ãƒ«ã«ã¦ã”æ¡ˆå†…ã„ãŸã—ã¾ã™ã€‚</small>
            </div>
        </section>

        <form id="reserveForm">
            
            <section class="card">
                <h3>ãŠç”³ã—è¾¼ã¿æƒ…å ±</h3>

                <label>ãŠåå‰ (ä¸»å‚¬è€…å)
                    <input type="text" name="name" required placeholder="ä¾‹ï¼šã‚­ãƒ³ã‚°ãƒ€ãƒ å¤ªéƒ">
                </label>
                
                <label>ãŠåå‰ (ã‚«ã‚¿ã‚«ãƒŠ) <small>â€»æŒ¯è¾¼åç¾©äººã®ç¢ºèªã«ä½¿ç”¨ã—ã¾ã™</small>
                    <input type="text" name="name_kana" required placeholder="ä¾‹ï¼šã‚­ãƒ³ã‚°ãƒ€ãƒ ã‚¿ãƒ­ã‚¦" pattern="[\u30A1-\u30F6ãƒ¼\sã€€]*" title="ã‚«ã‚¿ã‚«ãƒŠã§å…¥åŠ›ã—ã¦ãã ã•ã„">
                </label>

                <div class="grid">
                    <label>åˆ©ç”¨å¸Œæœ›æ—¥
                        <input type="date" name="date" required>
                    </label>
                    <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
                        <input type="email" name="email" required placeholder="example@gmail.com">
                    </label>
                </div>

                <div class="grid">
                    <label>é›»è©±ç•ªå·
                        <input type="tel" name="tel" required placeholder="090-0000-0000">
                    </label>
                    <label>X (Twitter) ID
                        <input type="text" name="x_id" required placeholder="@TorecaKingdom">
                    </label>
                </div>

                <label style="margin-top: 20px;">åˆ©ç”¨ç”¨é€” (å¤§ä¼šåãƒ»å¯¾æˆ¦å½¢å¼ãªã©)
                    <input type="text" id="eventTitle" required placeholder="ä¾‹ï¼šç¬¬1å› ã‚­ãƒ³ã‚°ãƒ€ãƒ æ¯ï¼ˆäºˆé¸ã‚¹ã‚¤ã‚¹ãƒ‰ãƒ­ãƒ¼å½¢å¼ï¼‰">
                </label>
            </section>

            <details class="sim-box">
                <summary>ğŸ› ï¸ åæ”¯ãƒ»è³å“ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ã†ï¼ˆä»»æ„ï¼‰</summary>
                <div style="margin-top: 20px;">
                    <p><small>å‚åŠ è²»ã‚„äººæ•°ã‚’è¨­å®šã™ã‚‹ã¨ã€åç›Šã¨é…åˆ†å¯èƒ½ãªãƒã‚¤ãƒ³ãƒˆã‚’è¨ˆç®—ã§ãã¾ã™ã€‚<br>â€»ã“ã“ã§è¨­å®šã—ãŸå†…å®¹ã¯ç”³ã—è¾¼ã¿æ™‚ã«åº—èˆ—ã¸ä¼ã‚ã‚Šã¾ã™ã€‚</small></p>

                    <div class="grid">
                        <div>
                            <h5>ğŸ’° åç›Šäºˆæ¸¬</h5>
                            <label>å‚åŠ è²» (1äºº) <input type="number" id="entryFee" value="2000" step="100"></label>
                            <label>æƒ³å®šäººæ•°: <span id="playerCountDisplay" style="color:var(--accent-blue); font-weight:bold;">32å</span>
                                <input type="range" id="playerCountRange" min="1" max="32" value="32">
                            </label>

                            <div style="background:#f8f9fa; border:1px solid var(--border-color); padding:15px; border-radius:8px;">
                                <div class="calc-row"><span>å£²ä¸Šç·é¡</span><span id="totalRevenue">Â¥64,000</span></div>
                                <div class="calc-row"><span>ä¼šå ´è²»</span><span style="color:#d32f2f">-Â¥32,000</span></div>
                                <div class="calc-total"><span>ä¸»å‚¬è€…åˆ©ç›Š</span><span id="organizerProfit" class="text-gold">Â¥32,000</span></div>
                            </div>
                        </div>

                        <div>
                            <h5>ğŸ é€šè²©ãƒã‚¤ãƒ³ãƒˆé…åˆ† (32,000pt)</h5>
                            <label>å‚åŠ è³(å…¨å“¡/250pt~) <input type="number" id="prizePart" value="250" step="10"></label>
                            <div class="grid">
                                <label>å„ªå‹ <input type="number" id="prize1st" value="10000"></label>
                                <label>æº–å„ªå‹ <input type="number" id="prize2nd" value="5000"></label>
                            </div>
                            <div class="grid">
                                <label>Best4(å„1) <input type="number" id="prizeTop4" value="2500"></label>
                                <label>Best8(å„1) <input type="number" id="prizeTop8" value="0"></label>
                            </div>
                            <div style="text-align:right; margin-top:15px; padding-top:10px; border-top:1px solid var(--border-color);">
                                <small>æ®‹ã‚Šãƒã‚¤ãƒ³ãƒˆ: </small>
                                <strong id="remainingPoints" style="font-size:1.3em; color:var(--accent-blue);">0 pt</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </details>

            <section class="card">
                <label>å‚™è€ƒãƒ»ãã®ä»– (ä»»æ„)
                    <textarea id="userMemo" rows="2" placeholder="è¨­å‚™ã«é–¢ã™ã‚‹è³ªå•ã‚„ã€é‹å–¶ä¸Šã®è¦æœ›ãªã©ãŒã‚ã‚Œã°ã”è¨˜å…¥ãã ã•ã„"></textarea>
                </label>

                <input type="hidden" name="purpose" id="finalPurpose">

                <hr style="border-color:var(--border-color); margin: 25px 0;">

                <div style="font-size: 0.95em; line-height: 1.8;">
                    <label><input type="checkbox" required> <strong>å‚åŠ è€…å…¨å“¡ã®ã€Œä¼šå“¡ç™»éŒ²ã€ã‚’å¿…é ˆã¨ã™ã‚‹ã“ã¨ã«åŒæ„ã—ã¾ã™</strong></label>
                    <label><input type="checkbox" required> åº—èˆ—ã‚¹ã‚¿ãƒƒãƒ•ã¯é‹å–¶è£œåŠ©ã‚’è¡Œã„ã¾ã›ã‚“</label>
                    <label><input type="checkbox" required> ãƒˆã‚¤ãƒ¬ãƒ»ãƒ¢ãƒ‹ã‚¿ãƒ¼(HDMI/Type-C)ä½¿ç”¨å¯</label>
                    <label><input type="checkbox" required> ä¼šå ´è²»32,000å††ã‚’æŒ‡å®šå£åº§ã¸æŒ¯ã‚Šè¾¼ã‚€ã“ã¨ã«åŒæ„ã—ã¾ã™</label>
                    <label><input type="checkbox" required> <strong>ã‚´ãƒŸã¯å„è‡ªã§ãŠæŒã¡å¸°ã‚Šã„ãŸã ãã“ã¨ã«åŒæ„ã—ã¾ã™</strong></label>
                </div>

                <button type="submit" id="submitBtn">äºˆç´„ã‚’ç”³ã—è¾¼ã‚€</button>
            </section>
        </form>

    </main>

    <script>
        // è¨­å®šæ¸ˆã¿ã®GAS URL
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyb1L9lbXiCFtR4hypvZSurkCHRLYwZIHO4vRxtU8ipyElckZGV5az30Kn-Dcr74qrN/exec';

        // --- å¤‰æ•°å®šç¾© ---
        const RENT_FEE = 32000;
        const TOTAL_POINTS = 32000;
        
        const inputs = {
            fee: document.getElementById('entryFee'),
            count: document.getElementById('playerCountRange'),
            part: document.getElementById('prizePart'),
            p1: document.getElementById('prize1st'),
            p2: document.getElementById('prize2nd'),
            p4: document.getElementById('prizeTop4'),
            p8: document.getElementById('prizeTop8'),
            eventTitle: document.getElementById('eventTitle'),
            userMemo: document.getElementById('userMemo')
        };

        const displays = {
            count: document.getElementById('playerCountDisplay'),
            revenue: document.getElementById('totalRevenue'),
            profit: document.getElementById('organizerProfit'),
            remPoints: document.getElementById('remainingPoints'),
            finalPurpose: document.getElementById('finalPurpose')
        };

        // --- è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ ---
        function calculate() {
            let players = parseInt(inputs.count.value);
            let fee = parseInt(inputs.fee.value) || 0;
            
            let revenue = fee * players;
            let profit = revenue - RENT_FEE;

            displays.count.textContent = players + "å";
            displays.revenue.textContent = "Â¥" + revenue.toLocaleString();
            displays.profit.textContent = "Â¥" + profit.toLocaleString();
            displays.profit.className = profit < 0 ? "text-red" : "text-gold";

            let pPart = parseInt(inputs.part.value) || 0;
            let p1 = parseInt(inputs.p1.value) || 0;
            let p2 = parseInt(inputs.p2.value) || 0;
            let p4 = parseInt(inputs.p4.value) || 0;
            let p8 = parseInt(inputs.p8.value) || 0;

            let used = (pPart * players) + p1 + p2 + (p4 * 2) + (p8 * 4);
            let remain = TOTAL_POINTS - used;

            displays.remPoints.textContent = remain.toLocaleString() + " pt";
            
            if(remain < 0) {
                displays.remPoints.style.color = "#d32f2f"; // èµ¤
                displays.remPoints.textContent += " (ä¸è¶³)";
            } else {
                displays.remPoints.style.color = "#007bc7"; // é’
            }

            let combinedText = `ã€å¤§ä¼šåãƒ»ç”¨é€”ã€‘\n${inputs.eventTitle.value}\n\n` +
                               `ã€å‚™è€ƒãƒ»ãã®ä»–ã€‘\n${inputs.userMemo.value}`;
            
            displays.finalPurpose.value = combinedText;
        }

        Object.values(inputs).forEach(el => { el.addEventListener('input', calculate); });
        calculate();

        // --- é€ä¿¡å‡¦ç† ---
        const form = document.getElementById('reserveForm');
        const btn = document.getElementById('submitBtn');

        form.addEventListener('submit', e => {
            e.preventDefault();
            calculate();
            
            btn.disabled = true;
            btn.innerText = "é€ä¿¡ä¸­...";
            
            const formData = new FormData(form);
            
            fetch(SCRIPT_URL, { method: 'POST', body: formData })
                .then(res => { showSuccess(); })
                .catch(err => { console.log(err); showSuccess(); });
        });

        function showSuccess() {
            alert('é€ä¿¡ã—ã¾ã—ãŸã€‚\n\nâ€»ã¾ã äºˆç´„ã¯ç¢ºå®šã—ã¦ãŠã‚Šã¾ã›ã‚“ã€‚\næ‹…å½“è€…ã‹ã‚‰ãƒ¡ãƒ¼ãƒ«ã§é€£çµ¡ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚');
            form.reset();
            inputs.fee.value = 2000;
            inputs.count.value = 32;
            calculate();
            btn.disabled = false;
            btn.innerText = "äºˆç´„ã‚’ç”³ã—è¾¼ã‚€";
        }
    </script>
</body>
</html>
